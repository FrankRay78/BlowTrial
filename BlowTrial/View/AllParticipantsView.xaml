<UserControl 
  x:Class="BlowTrial.View.AllParticipantsView"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:scm="clr-namespace:System.ComponentModel;assembly=WindowsBase"
  >
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/View/WorkspaceResources.xaml" />
                <ResourceDictionary>

                    <GroupStyle x:Key="DetailsGroupStyle">
                        <GroupStyle.HeaderTemplate>
                            <DataTemplate>
                                <TextBlock 
                                    x:Name="txt" 
                                    Background="{StaticResource Brush_HeaderBackground}"
                                    FontWeight="Bold"
                                    Foreground="White"
                                    Margin="1"
                                    Padding="4,2,0,2"
                                    Text="{Binding Name}" 
                                    />
                            </DataTemplate>
                        </GroupStyle.HeaderTemplate>
                    </GroupStyle>
                    <Style x:Key="ParticipantItemStyle" TargetType="{x:Type DataGridRow}">
                    <Setter Property="HorizontalContentAlignment" Value="Center" />
                    <Style.Triggers>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="ItemsControl.AlternationIndex" Value="1" />
                                <Condition Property="IsSelected" Value="False" />
                                <Condition Property="IsMouseOver" Value="False" />
                            </MultiTrigger.Conditions>
                            <Setter Property="Background" Value="#EEEEEEEE" />
                        </MultiTrigger>
                    </Style.Triggers>
                </Style>
                </ResourceDictionary>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>

    <DockPanel>
        <DataGrid 
          DockPanel.Dock="Top" AlternatingRowBackground="AliceBlue"
          ItemContainerStyle="{StaticResource ParticipantItemStyle}"
          ItemsSource="{Binding Path=AllParticipants}"
          SelectedItem="{Binding Path=SelectedParticipant}"
          AutoGenerateColumns="False" CanUserAddRows="False" CanUserDeleteRows="False"
            CanUserSortColumns="True" IsReadOnly="True"
          >
            <DataGrid.GroupStyle>
                <StaticResourceExtension 
                  ResourceKey="DetailsGroupStyle" 
                  />
            </DataGrid.GroupStyle>
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding Path=Id, Mode=OneWay}" Header="Trial Id" />
                <DataGridTextColumn Binding="{Binding Path=Name, Mode=OneWay}" Header="Name" />
                <DataGridTextColumn Binding="{Binding Path=Gender, Mode=OneWay}" Header="Gender" />
                <DataGridTextColumn Binding="{Binding Path=HospitalIdentifier, Mode=OneWay}" Header="Hospital Id" />
                <DataGridTextColumn Binding="{Binding Path=AgeDays, Mode=OneWay}" Header="Days of age" />
                <DataGridTextColumn Binding="{Binding Path=DateTimeEnrollment, StringFormat='d', Mode=OneWay}" Header="Date Of Enrollment" />
            </DataGrid.Columns>
        </DataGrid>
        <TextBlock DockPanel.Dock="Bottom" HorizontalAlignment="Right" Margin="0,0,5,5" >
            <Hyperlink Command="{Binding ShowUpdateDetails}" >Update Details</Hyperlink>
        </TextBlock>
        <Separator DockPanel.Dock="Bottom" />
    </DockPanel>
</UserControl>